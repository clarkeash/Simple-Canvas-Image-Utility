var ImageManager=function(t,i){function e(){s.canvas=document.getElementById(i),s.context=s.canvas.getContext("2d"),h.canvas=document.createElement("canvas"),h.context=h.canvas.getContext("2d"),s.image=new Image,s.image.src=t}var h={source:{x:0,y:0,width:0,height:0},dest:{x:0,y:0,width:0,height:0},draw:function(t){this.clear(),this.context.drawImage(t,this.source.x,this.source.y,this.source.width,this.source.height,this.dest.x,this.dest.y,this.dest.width,this.dest.height)},setSize:function(t,i){this.source.width=this.dest.width=t,this.source.height=this.dest.height=i,this.canvas.width=t+i,this.canvas.height=t+i},clear:function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}},s={source:{x:0,y:0,width:0,height:0},dest:{x:0,y:0,width:0,height:0},scale:1,load:function(t){var i=this;this.image.onload=function(){h.setSize(i.image.width,i.image.height),h.draw(i.image),t.call(c)}},draw:function(){this.context.drawImage(h.canvas,0,0)},scaleWidthTo:function(t){this.scale=h.source.width/t,h.dest.width=h.source.width/this.scale,h.dest.height=h.source.height/this.scale,h.draw(this.image)},scaleHeightTo:function(t){this.scale=h.source.height/t,h.dest.width=h.source.width/this.scale,h.dest.height=h.source.height/this.scale,h.draw(this.image)},cropRight:function(t){h.source.width=t*this.scale,h.dest.width=t,h.draw(this.image)},cropLeft:function(t){h.source.x=h.source.width-t*this.scale,h.source.width=t*this.scale,h.dest.width=t,h.draw(this.image)},cropBottom:function(t){h.source.height=t*this.scale,h.dest.height=t,h.draw(this.image)},cropTop:function(t){h.source.y=h.source.height-t*this.scale,h.source.height=t*this.scale,h.dest.height=t,h.draw(this.image)},cropWidth:function(t){h.source.x=(h.source.width-t*this.scale)/2,h.source.width=t*this.scale,h.dest.width=t,h.draw(this.image)},cropHeight:function(t){h.source.y=(h.source.height-t*this.scale)/2,h.source.height=t*this.scale,h.dest.height=t,h.draw(this.image)}};e();var c={load:function(t){return s.load(t)},draw:function(){s.draw()},scaleWidthTo:function(t){return s.scaleWidthTo(t),this},scaleHeightTo:function(t){return s.scaleHeightTo(t),this},scaleMaxTo:function(t){return s.image.width>s.image.height?this.scaleWidthTo(t):this.scaleHeightTo(t),this},scaleMinTo:function(t){return s.image.width<s.image.height?this.scaleWidthTo(t):this.scaleHeightTo(t),this},cropRight:function(t){return s.cropRight(t),this},cropLeft:function(t){return s.cropLeft(t),this},cropBottom:function(t){return s.cropBottom(t),this},cropTop:function(t){return s.cropTop(t),this},cropWidth:function(t){return s.cropWidth(t),this},cropHeight:function(t){return s.cropHeight(t),this},square:function(t){return this.scaleMinTo(t),this.cropHeight(t),this.cropWidth(t),this}};return c};